<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Three.js æ¨¡å‹ãƒ‡ãƒ¢</title>
  <style>body { margin: 0; overflow: hidden; }</style>

  <!-- Google Analytics è¨­å®š é–²è¦§æ•°ã®æ¸¬å®šç”¨ã§ã™ã€‚-->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B8X9Y12345"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-E7Z2FM74H9');
  </script>
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.169.0/build/three.module.js"
    }
  }
  </script>
</head>
<body>
<!--   
  <button id="speed-up" class="no-touch-highlight" style="position: fixed; left: 20px; bottom: 200px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">â–¶ï¸â–·</button>

  <button id="speed-down" class="no-touch-highlight" style="position: fixed; left: 95px; bottom: 200px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">â—€ï¸â—</button>
  
  <button id="btn-up" class="no-touch-highlight" style="position: fixed; left: 20px; bottom: 120px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">ğŸ”º</button>
  
  <button id="btn-down" class="no-touch-highlight" style="position: fixed; left: 20px; bottom: 40px; width: 60px; height: 60px; font-size: 24px; border-radius: 30px; z-index: 20; opacity: 0.3;">ğŸ”»</button> -->
  <style>
    .control-button {
      position: fixed;
      width: 60px;
      height: 60px;
      font-size: 24px;
      border: none;
      border-radius: 30px;
      background-color: rgba(255, 255, 255, 0.2); /* é€éã£ã½ã„ */
      color: white;
      z-index: 20;
      backdrop-filter: blur(4px); /* iOSã£ã½ã„ã‚¬ãƒ©ã‚¹æ„Ÿ */
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: all 0.1s ease-in-out;
      
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }

  .control-square-button {
    position: fixed;
    width: 400px;
    height: 40px;
    font-size: 24px;
    border: none;
    border-radius: 4px; /* â† å››è§’ã£ã½ã„è§’ä¸¸ï¼ˆå®Œå…¨ã«å››è§’ãªã‚‰ 0 ã«ï¼‰ */
    background-color: rgba(255, 255, 255, 0.2);
    color: white;
    z-index: 20;
    backdrop-filter: blur(4px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    transition: all 0.1s ease-in-out;

    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }
  .log-control-square-button {
    position: fixed;
    width: 800px;
    height: 400px;
    font-size: 24px;
    border: none;
    border-radius: 4px; /* â† å››è§’ã£ã½ã„è§’ä¸¸ï¼ˆå®Œå…¨ã«å››è§’ãªã‚‰ 0 ã«ï¼‰ */
    background-color: rgba(255, 255, 255, 0.2);
    color: white;
    z-index: 20;
    backdrop-filter: blur(4px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    transition: all 0.1s ease-in-out;

    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  /* ãƒ›ãƒãƒ¼ï¼ˆãƒã‚¦ã‚¹ã‚’ä¹—ã›ãŸã¨ãï¼‰ã§æš—ãã™ã‚‹ */
  .control-button:hover {
    filter: brightness(85%);
    cursor: pointer;
  }

  /* ã‚¯ãƒªãƒƒã‚¯ä¸­ï¼ˆæŠ¼ã—ã¦ã‚‹æœ€ä¸­ï¼‰ã§ã•ã‚‰ã«æš—ãã™ã‚‹ */
  .control-button:active {
    filter: brightness(70%);
  }

  /* ã‚¢ã‚¤ã‚³ãƒ³ã®é‡ã­ãƒ©ãƒƒãƒ‘ãƒ¼ */
  .icon-wrapper {
    position: relative;
    display: flex;              /* ä¸­å¤®å¯„ã›ç”¨ */
    align-items: center;        /* ç¸¦ä¸­å¤® */
    justify-content: center;    /* æ¨ªä¸­å¤® */
    width: 2em;                 /* ãƒœã‚¿ãƒ³ã«åˆã‚ã›ã¦å¤§ãã‚ã« */
    height: 2em;
    }

  /* è–„ã„èƒŒæ™¯è¨˜å· */
  .background-icon {
    position: absolute;
    color: rgba(0, 0, 0, 0.5);
    font-size: 1.5em;
  }
  /* æ¿ƒã„å‰é¢è¨˜å· */
  .foreground-icon {
    position: absolute;
    color: black;
    font-size: 1.3em;
  }
  
  .credits-footer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255,255,255,0.9);
    padding: 6px 12px;
    font-size: 12px;
    text-align: center;
    z-index: 9999;
    box-shadow: 0 -1px 6px rgba(0,0,0,0.12);
  }
  .credits-footer a { color: #0645ad; text-decoration: underline; }

  /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  .circle-ctrl-area {
    position: absolute;
    border-radius: 50%;
    background: rgba(255,255,255,0.95);
    background: rgba(0,0,0,0.5);
    border: 2px solid #333;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transform: translate(-50%, -50%); /* left/top ã‚’ä¸­å¿ƒã«ã™ã‚‹ */
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    touch-action: none;
    cursor: grab;
    pointer-events: auto;
  }
  /* .circle-ctrl-area { cursor: grabbing; } */

  .circle-ctrl {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(0,0,0,0.5);
    border: 2px solid #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transform: translate(-50%, -50%); /* left/top ã‚’ä¸­å¿ƒã«ã™ã‚‹ */
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    touch-action: none;
    cursor: grab;
    pointer-events: auto;
  }
  /* .circle-ctrl:active { cursor: grabbing; } */
  #UiGroup {
    position: relative; /* ã“ã“ã‚’åŸºæº–ã«ã™ã‚‹ */
    width: 10%;
    height: 590px;
    border: 1px solid rgba(221, 221, 221, 0.2); /* é€æ˜åº¦ 0.5 (=50%) */
  }
  #UiGroup button {
    position: absolute; /* top ãŒåŠ¹ãã‚ˆã†ã«ã™ã‚‹ */
    left: 0;
    width: 72px;
    height: 28px;
  }

</style>
  
  <button id="speed-up" class="control-button" style="right: 20px; bottom: 200px;">â—€ï¸â—</button>
  <button id="speed-down" class="control-button" style="right: 95px; bottom: 200px;">â–¶ï¸â–·</button>
  <button id="btn-up" class="control-button" style="right: 160px; bottom: 150px;">ğŸ”º</button>
  <button id="btn-down" class="control-button" style="right: 160px; bottom: 70px;">ğŸ”»</button>
      
  <!-- å·¦ã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆå·¦ä¸‹ã«è¡¨ç¤ºï¼‰ -->
  <button id="controller-area" class="circle-ctrl-area" style="left: 160px; bottom: 60px; width: 80px; height: 80px"></button>
  <button id="controller" class="circle-ctrl" style="left: 160px; bottom: 110px; width: 30px; height: 30px"></button>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.8.6/nipplejs.min.js"></script>
  <div id="left-stick" style="user-select: none; -webkit-tap-highlight-color: transparent; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; position: fixed; left: 7vw; bottom: 0; width: 40vw; height: 60vh; z-index: 10;"></div>
  <div id="right-stick" style="user-select: none; -webkit-tap-highlight-color: transparent; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; position: fixed; right: 7vw; bottom: 0; width: 40vw; height: 60vh; z-index: 10;"></div> -->

  <button id="log" class="control-button" style="right: 20px; top: 40px;">ğŸ“¤</button>

  </button>

  <!-- ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ -->
  <div id="UiGroup" style="position: fixed; top: 140px; left: 20px; z-index: 100;">
    <button id = 'see' style = 'top: 10px;' > ğŸ¦ </button>
    <button id = 'edit' style = 'top: 40px;' > ğŸ› ï¸ </button>
    <button id = 'rail' style = 'top: 70px; left:10px;' > ğŸ›¤ï¸ </button>
    <button id = 'new' style = 'top: 100px; left:20px;' > + </button>
    <button id = 'move' style = 'top: 130px; left:20px;' > ğŸ’« </button>
    <button id = 'x_z' style = 'top: 160px; left:30px;' > â¤® </button>
    <button id = 'y' style = 'top: 190px; left:30px;' > â‡¡ </button>
    <button id = 'poll' style = 'top: 220px; left:10px;' > âš¡ï¸ </button>
    <button id = 'new/2' style = 'top: 250px; left:20px;' > + </button>
    <button id = 'move/2' style = 'top: 280px; left:20px;' > ğŸ’« </button>
    <button id = 'x_z/2' style = 'top: 310px; left:30px;' > â¤® </button>
    <button id = 'y/2' style = 'top: 340px; left:30px;' > â‡¡ </button>
    <button id = 'creat' style = 'top: 370px; left:10px;' > ğŸª„ </button>
    <button id = 'sphere' style = 'top: 400px; left:20px;' > ğŸŒ </button>
    <button id = 'cube' style = 'top: 430px; left:20px;' > ğŸ“¦ </button>
    <button id = 'pick' style = 'top: 460px; left:20px;' > âŒ– </button>
    <button id = 'move/3' style = 'top: 490px; left:20px;' > ğŸ’« </button>
    <button id = 'x_z/3' style = 'top: 520px; left:30px;' > â¤® </button>
    <button id = 'y/3' style = 'top: 550px; left:30px;' > â‡¡ </button> 
    <button id = 'custom' style = 'top: 220px; left: 100px;' > â™¾ </button>
    <button id = 'new/3' style = 'top: 250px; left: 20px;' > + </button>
    <button id = 'construct' style = 'top: 280px; left: 20px;' > ğŸŒ </button>
    <button id = 'move/4' style = 'top: 310px; left: 20px;' > ğŸ’« </button>
    <button id = 'x_z/4' style = 'top: 340px; left: 30px;' > â¤® </button>
    <button id = 'y/4' style = 'top: 370px; left: 30px;' > â‡¡ </button>

    <!-- <button id = 'see' style = 'top: 10px; left: 0px;' > </button>
    <button id = 'edit' style = 'top: 40px; left: 0px;' > </button>
    <button id = 'rail' style = 'top: 70px; left: 10px;' > </button>
    <button id = 'new' style = 'top: 100px; left: 20px;' > </button>
    <button id = 'move' style = 'top: 130px; left: 20px;' > </button>
    <button id = 'x_z' style = 'top: 160px; left: 30px;' > </button>
    <button id = 'y' style = 'top: 190px; left: 30px;' > </button>
    <button id = 'poll' style = 'top: 220px; left: 10px;' > </button>
    <button id = 'new/2' style = 'top: 250px; left: 20px;' > </button>
    <button id = 'move/2' style = 'top: 280px; left: 20px;' > </button>
    <button id = 'x_z/2' style = 'top: 310px; left: 30px;' > </button>
    <button id = 'y/2' style = 'top: 340px; left: 30px;' > </button>
    <button id = 'creat' style = 'top: 370px; left: 10px;' > </button>
    <button id = 'sphere' style = 'top: 400px; left: 20px;' > </button>
    <button id = 'cube' style = 'top: 430px; left: 20px;' > </button>
    <button id = 'pick' style = 'top: 460px; left: 20px;' > </button>
    <button id = 'x_z/3' style = 'top: 490px; left: 30px;' > </button>
    <button id = 'y/3' style = 'top: 520px; left: 30px;' > </button>
    -->
  </div>

  <button id="toggle-crossover" class="control-square-button" style="
    position: absolute;
    left: 20px;
    top: 20px;
    padding: 10px;
    font-size: 14px;
    z-index: 10;
    backdrop-filter: blur(4px); /* iOSã£ã½ã„ã‚¬ãƒ©ã‚¹æ„Ÿ */
    ">ãƒ©ãƒ³ãƒ€ãƒ ç«‹ä½“äº¤å·®ï¼ˆã‚¯ã‚¢ãƒˆãƒ­äº¤å·®ï¼‰åˆ‡æ›¿</button> 

  <div id="frontViewButtons" style="position: fixed; top: 20px; right: 20px; z-index: 100;">
    <button class="frontViewBtn" data-train="1">1ç•ªç·š</button>
    <button class="frontViewBtn" data-train="2">2ç•ªç·š</button>
    <button class="frontViewBtn" data-train="3">3ç•ªç·š</button>
    <button class="frontViewBtn" data-train="4">4ç•ªç·š</button>
  </div>
  
  <!-- ğŸŒ æ˜¼å¤œåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
  <button id="toggle-daynight" style="
    position: fixed;
    top: 70px;
    left: 20px;
    z-index: 10;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 8px;
  ">ğŸŒ™ å¤œã«ã™ã‚‹</button>

  <button id = "logwindow" class="log-control-square-button" style="
  position: absolute;
  left: 130px;
  top: 20px;
  padding: 10px;
  font-size: 14px;
  color: #000;
  z-index: 10;
  backdrop-filter: blur(4px); /* iOSã£ã½ã„ã‚¬ãƒ©ã‚¹æ„Ÿ */
  ">ãƒ¢ãƒã‚¤ãƒ«å‡ºåŠ›ç”¨</button> 

  <canvas id="three-canvas"></canvas>
  
  <footer class="credits-footer" role="contentinfo" aria-label="å‡ºå…¸æƒ…å ±">
    <small>

      (â„¹ï¸ <a href="https://github.com/mtur2007/java_three_3D/blob/main/README.md" target="_blank" rel="noopener noreferrer">æ“ä½œæ–¹æ³•ã¯ã“ã¡ã‚‰</a>)
      [ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ / 
      ãƒ‡ãƒ¼ã‚¿:
      <a href="https://plateauview.mlit.go.jp/" target="_blank" rel="noopener noreferrer">PLATEAU</a>ï¼ˆå›½åœŸäº¤é€šçœï¼‰|
      ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚º: 
      <a href="https://threejs.org/" target="_blank" rel="noopener noreferrer">
      three.js (r0.169.0, MIT)</a> | 
      å¤‰æ›: 
      <a href="https://github.com/Project-PLATEAU/PLATEAU-GIS-Converter" target="_blank" rel="noopener noreferrer">
      PLATEAU GIS Converter</a> ]
    </small>
  </footer>
  
  <script type="module" src="js/main.js"></script>
  <script type="module" src="js/ui_toggle.js"></script>

</body>
</html>
